<h1>Entreprises</h1>

<mat-form-field>
	<input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
</mat-form-field>

<div class="mat-elevation-z2">
	<div class="spinner-container" *ngIf="loading$ | async">
        <mat-spinner></mat-spinner>
	</div>
	<table mat-table matSort matSortActive="entreprise" matSortDisableClear matSortDirection="asc" [dataSource]="dataSource"
	[hidden]="loading$ | async">
		<!-- Edit Button -->
		<ng-container matColumnDef="edit">
			<th mat-header-cell *matHeaderCellDef>
			</th>
			<td mat-cell *matCellDef="let row">
				<button mat-button (click)="onViewButtonClick(row)" routerLink="/entreprises/{{row.key}}"aria-label="View"><i class="material-icons">visibility</i></button>
			</td>
		</ng-container>
		<!-- Name Column -->
		<ng-container matColumnDef="entreprise">
			<th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
			<td mat-cell *matCellDef="let entreprise"> {{entreprise.entreprise}} </td>
		</ng-container>

		<!-- Context Column -->
		<ng-container matColumnDef="context">
			<th mat-header-cell *matHeaderCellDef mat-sort-header> Context </th>
			<td mat-cell *matCellDef="let entreprise"> {{entreprise.context}} </td>
		</ng-container>

		<!-- Descriptif Column -->
		<ng-container matColumnDef="descriptif">
			<th mat-header-cell *matHeaderCellDef mat-sort-header> Descriptif </th>
			<td mat-cell *matCellDef="let entreprise"> {{entreprise.descriptif}} </td>
		</ng-container>

	<tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
	<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

	</table>
	<mat-paginator [pageSizeOptions]="[10, 20, 50]" showFirstLastButtons></mat-paginator>

</div>